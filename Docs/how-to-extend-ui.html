<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Renga API: How to extend the user interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.ico" type="image/x-icon"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
  /* @license-end */
</script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Renga API"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="renga_api.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="clipboard.js"></script>
</head>
<body>
<div id="top"  style="background-color: #cbd2db; "><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" >
<table style="background-color: #cbd2db; padding: 10px;">
 <tbody>
 <tr style="height: 56px; width: 100%;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0em;">
   <div id="projectnumber">
   v2.41
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
          <div class="left">
            <form id="FSearchBox" action="search.html" method="get">
              <span id="MSearchSelectExt">&#160;</span>
              <input type="text" id="MSearchField" name="query" value="" placeholder="Search" size="20" accesskey="S" 
                     onfocus="searchBox.OnSearchFieldFocus(true)" 
                     onblur="searchBox.OnSearchFieldFocus(false)"/>
            </form>
          </div><div class="right"></div>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('how-to-extend-ui.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">How to extend the user interface</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#how-to-extend-ui-overview">Overview</a></li>
<li class="level1"><a href="#how-to-extend-ui-create-action">How to create actions</a><ul><li class="level2"><a href="#autotoc_md15">C++</a></li>
<li class="level2"><a href="#autotoc_md16">C#</a></li>
</ul>
</li>
<li class="level1"><a href="#how-to-extend-ui-handle-action-events">How to handle action events</a><ul><li class="level2"><a href="#autotoc_md17">C++</a></li>
<li class="level2"><a href="#autotoc_md18">C#</a></li>
</ul>
</li>
<li class="level1"><a href="#how-to-extend-ui-add-controls-to-panels">How to add custom controls to panels</a><ul><li class="level2"><a href="#autotoc_md19">C++</a></li>
<li class="level2"><a href="#autotoc_md20">C#</a></li>
</ul>
</li>
<li class="level1"><a href="#how-to-extend-ui-create-context-menu">How to create context menus</a><ul><li class="level2"><a href="#autotoc_md21">C++</a></li>
<li class="level2"><a href="#autotoc_md22">C#</a></li>
</ul>
</li>
<li class="level1"><a href="#how-to-extend-ui-see-also">See also</a></li>
<li class="level1"><a href="#how-to-extend-ui-related-samples">Related samples</a></li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_pages_2how-to-extend-ui"></a></p>
<h1><a class="anchor" id="how-to-extend-ui-overview"></a>
Overview</h1>
<p>Renga API allows developers to extend user interface of Renga in a number of ways: plugins can add custom controls to panels and commands to context menus, show notification messages, use the "Open file" and "Save file" dialogs, etc. Most of these means are available via the <a class="el" href="interface_i_u_i.html" title="Contains functions relating to the user interface.">IUI</a> interface. To get a reference to it call IApplication::GetUI().</p>
<h1><a class="anchor" id="how-to-extend-ui-create-action"></a>
How to create actions</h1>
<p>Renga API does not allow to operate directly on UI controls, such as tool buttons and windows. Instead, it provides a higher-level abstraction of user interface commands, represented by the <a class="el" href="interface_i_action.html">IAction</a> interface. Actions control the UI elements they are assigned to: an action defines the tooltip, the icon image and the state of the element and supplies handlers for the element's events. The same action instance can be assigned to different controls simultaneously, for example, both to a button and a context menu item. Call <a class="el" href="interface_i_u_i.html#a3f8d38664199a306a31706cf8f1ba17f" title="Creates a new action object.">IUI::CreateAction()</a> to create an action.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
C++</h2>
<div class="fragment"><div class="line">Renga::IImagePtr pImage = pUI-&gt;CreateImage();</div>
<div class="line">pImage-&gt;LoadFromFile(L<span class="stringliteral">&quot;Icon path&quot;</span>);</div>
<div class="line"> </div>
<div class="line">Renga::IActionPtr pAction = pUI-&gt;CreateAction();</div>
<div class="line">pAction-&gt;PutDisplayName(L<span class="stringliteral">&quot;Name&quot;</span>);</div>
<div class="line">pAction-&gt;PutToolTip(L<span class="stringliteral">&quot;Tooltip text&quot;</span>);</div>
<div class="line">pAction-&gt;PutIcon(pImage);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
C#</h2>
<div class="fragment"><div class="line">Renga.IImage image = ui.CreateImage();</div>
<div class="line">image.LoadFromFile(<span class="stringliteral">&quot;Icon path&quot;</span>);</div>
<div class="line"> </div>
<div class="line">Renga.IAction action = ui.CreateAction();</div>
<div class="line">action.DisplayName = <span class="stringliteral">&quot;Name&quot;</span>;</div>
<div class="line">action.ToolTip = <span class="stringliteral">&quot;Tooltip text&quot;</span>;</div>
<div class="line">action.Icon = image;</div>
</div><!-- fragment --><h1><a class="anchor" id="how-to-extend-ui-handle-action-events"></a>
How to handle action events</h1>
<p>Event handling, in a way, differs between the SDK languages. C++ SDK provides the <code>ActionEventHandler</code> helper class, which leverages the COM event subscription itself. C# SDK provides an alternative implementation, the <code>ActionEventSource</code> class, to facilitate the native .NET event syntax.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
C++</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyActionHandler : <span class="keyword">public</span> <a class="code hl_class" href="class_renga_1_1_action_event_handler.html">Renga::ActionEventHandler</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">  <span class="keywordtype">void</span> OnTriggered()<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <span class="comment">// Handle the OnTriggered event</span></div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="keywordtype">void</span> OnToggled(<span class="keywordtype">bool</span> checked)<span class="keyword"> override</span></div>
<div class="line"><span class="keyword">  </span>{</div>
<div class="line">    <span class="comment">// Handle the OnToggled event</span></div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">...</div>
<div class="line"> </div>
<div class="line">Renga::IActionPtr pMyAction = createMyAction();</div>
<div class="line">m_pMyHandler = <span class="keyword">new</span> MyActionHandler(pMyAction); <span class="comment">// should stay alive as long as you need to handle the events</span></div>
<div class="ttc" id="aclass_renga_1_1_action_event_handler_html"><div class="ttname"><a href="class_renga_1_1_action_event_handler.html">Renga::ActionEventHandler</a></div><div class="ttdef"><b>Definition</b> ActionEventHandler.hpp:21</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md18"></a>
C#</h2>
<div class="fragment"><div class="line">Renga.IAction myAction = createMyAction();</div>
<div class="line">m_myActionEvents = <span class="keyword">new</span> Renga.ActionEventSource(myAction); <span class="comment">// should stay alive as long as you need to handle the events</span></div>
<div class="line">m_myActionEvents.Triggered += (sender, args) =&gt; { <span class="comment">/* handle the Triggered event */</span> };</div>
<div class="line">m_myActionEvents.Toggled += (sender, args) =&gt; { <span class="comment">/* handle the Toggled event */</span>};</div>
</div><!-- fragment --><p>Since Renga API is built on COM, you can also create your own event handlers using the IConnectionPoint mechanism directly.</p>
<h1><a class="anchor" id="how-to-extend-ui-add-controls-to-panels"></a>
How to add custom controls to panels</h1>
<h2><a class="anchor" id="autotoc_md19"></a>
C++</h2>
<div class="fragment"><div class="line">Renga::IUIPanelExtensionPtr pUIPanelExtension = pUI-&gt;CreateUIPanelExtension();</div>
<div class="line">pUIPanelExtension-&gt;AddToolButton(CreateAction1());</div>
<div class="line"> </div>
<div class="line">Renga::IDropDownButtonPtr pDropDownButton = pUI-&gt;CreateDropDownButton();</div>
<div class="line">pDropDownButton-&gt;PutToolTip(L<span class="stringliteral">&quot;DropDownButton tooltip&quot;</span>);</div>
<div class="line">pDropDownButton-&gt;PutIcon(CreateIconForDropdownButton());</div>
<div class="line">pDropDownButton-&gt;AddAction(CreateAction2());</div>
<div class="line">pDropDownButton-&gt;AddAction(CreateAction3());</div>
<div class="line"> </div>
<div class="line">pUIPanelExtension-&gt;AddDropDownButton(pDropDownButton);</div>
<div class="line"> </div>
<div class="line">Renga::ISplitButtonPtr pSplitButton = pUI-&gt;CreateSplitButton(CreateDefaultAction()));</div>
<div class="line">pSplitButton-&gt;AddAction(CreateAction4());</div>
<div class="line">pSplitButton-&gt;AddAction(CreateAction5());</div>
<div class="line"> </div>
<div class="line">pUIPanelExtension-&gt;AddSplitButton(pSplitButton);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add controls to the primary panel:</span></div>
<div class="line">pUI-&gt;AddExtensionToPrimaryPanel(pUIPanelExtension);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add controls to the action panel, specific for the 3D view:</span></div>
<div class="line">pUI-&gt;AddExtensionToActionsPanel(pUIPanelExtension, Renga::ViewType::ViewType_View3D);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md20"></a>
C#</h2>
<div class="fragment"><div class="line">Renga.IUIPanelExtension uiIPanelExtension = ui.CreateUIPanelExtension();</div>
<div class="line">uiIPanelExtension.AddToolButton(CreateAction1());</div>
<div class="line"> </div>
<div class="line">Renga.IDropDownButton dropDownButton = ui.CreateDropDownButton();</div>
<div class="line"><span class="comment">// DropDownButton has it&#39;s own name and icon</span></div>
<div class="line">dropDownButton.ToolTip = <span class="stringliteral">&quot;DropDownButton tooltip&quot;</span>;</div>
<div class="line">dropDownButton.Icon = CreateIconForDropdownButton();</div>
<div class="line">dropDownButton.AddAction(CreateAction1());</div>
<div class="line">dropDownButton.AddAction(CreateAction2());</div>
<div class="line"> </div>
<div class="line">uiIPanelExtension.AddDropDownButton(dropDownButton);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// SplitButton has a default action</span></div>
<div class="line">Renga.ISplitButton splitButton = ui.CreateSplitButton(CreateDefaultAction()));</div>
<div class="line">splitButton.AddAction(CreateAction3());</div>
<div class="line">splitButton.AddAction(CreateAction4());</div>
<div class="line"> </div>
<div class="line">uiIPanelExtension.AddSplitButton(splitButton);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add controls to the primary panel:</span></div>
<div class="line">ui.AddExtensionToPrimaryPanel(uiIPanelExtension);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add controls to the action panel, specific for the 3D view:</span></div>
<div class="line">ui.AddExtensionToActionsPanel(uiIPanelExtension, Renga.ViewType.ViewType_View3D);</div>
</div><!-- fragment --><h1><a class="anchor" id="how-to-extend-ui-create-context-menu"></a>
How to create context menus</h1>
<h2><a class="anchor" id="autotoc_md21"></a>
C++</h2>
<div class="fragment"><div class="line">Renga::IContextMenuPtr pContextMenu = pUI-&gt;CreateContextMenu();</div>
<div class="line">pContextMenu-&gt;AddActionItem(CreateAction1());</div>
<div class="line">pContextMenu-&gt;AddActionItem(CreateAction2());</div>
<div class="line">pContextMenu-&gt;AddSeparator();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a nested context menu node:</span></div>
<div class="line">Renga::IContextMenuNodeItemPtr pContextMenuNode = pContextMenu-&gt;AddNodeItem();</div>
<div class="line">pContextMenuNode-&gt;AddActionItem(CreateAction3());</div>
<div class="line">pContextMenuNode-&gt;AddSeparator();</div>
<div class="line">pContextMenuNode-&gt;AddActionItem(CreateAction4());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define the context menu ID. It can be used to update the contents of the menu.</span></div>
<div class="line"><span class="comment">// To update the menu create a new context menu and call AddContextMenu with the previously used ID.</span></div>
<div class="line">GUID contextMenuId;</div>
<div class="line">IIDFromString(L<span class="stringliteral">&quot;{AE6F83B2-648D-4D01-B393-841D65DA922E}&quot;</span>, &amp;contextMenuId);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The context menu will be shown on the 3D view scene. Use ContextMenuShowCase_Selection to show the menu only on selected objects.</span></div>
<div class="line">pUI-&gt;AddContextMenu(&amp;contextMenuId, pContextMenu, Renga::ViewType::ViewType_View3D, Renga::ContextMenuShowCase::ContextMenuShowCase_Scene);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md22"></a>
C#</h2>
<div class="fragment"><div class="line">Renga.IContextMenu contextMenu = ui.CreateContextMenu();</div>
<div class="line">contextMenu.AddActionItem(CreateAction1());</div>
<div class="line">contextMenu.AddActionItem(CreateAction2());</div>
<div class="line">contextMenu.AddSeparator();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Create a nested context menu node:</span></div>
<div class="line">Renga.IContextMenuNodeItem contextMenuNode = contextMenu.AddNodeItem();</div>
<div class="line">contextMenuNode.AddActionItem(CreateAction3());</div>
<div class="line">contextMenuNode.AddSeparator();</div>
<div class="line">contextMenuNode.AddActionItem(CreateAction4());</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define the context menu ID. It can be used to update the contents of the menu.</span></div>
<div class="line"><span class="comment">// To update the menu create a new context menu and call AddContextMenu with the previously used ID.</span></div>
<div class="line">Guid contextMenuId = <span class="keyword">new</span> Guid(<span class="stringliteral">&quot;{AE6F83B2-648D-4D01-B393-841D65DA922E}&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// The context menu will be shown on the 3D view scene. Use ContextMenuShowCase_Selection to show the menu only on selected objects.</span></div>
<div class="line">ui.AddContextMenu(contextMenuId, contextMenu, Renga.ViewType.ViewType_View3D, Renga.ContextMenuShowCase.ContextMenuShowCase_Scene);</div>
</div><!-- fragment --><h1><a class="anchor" id="how-to-extend-ui-see-also"></a>
See also</h1>
<ul>
<li><a class="el" href="interface_i_u_i.html">IUI</a></li>
<li><a class="el" href="interface_i_application.html">IApplication</a></li>
<li><a class="el" href="interface_i_u_i_panel_extension.html">IUIPanelExtension</a></li>
<li><a class="el" href="interface_i_split_button.html">ISplitButton</a></li>
<li><a class="el" href="interface_i_drop_down_button.html">IDropDownButton</a></li>
<li><a class="el" href="interface_i_action.html">IAction</a></li>
<li><a class="el" href="interface_i_context_menu.html">IContextMenu</a></li>
<li><a class="el" href="interface_i_image.html">IImage</a></li>
</ul>
<h1><a class="anchor" id="how-to-extend-ui-related-samples"></a>
Related samples</h1>
<ul>
<li>Buttons</li>
<li>ControlStateManagement</li>
<li>ContextMenus </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen-->
<!--BEGIN FOOTER-->
<div id="nav-path" class="navpath">
    <ul>
      <li class="footer"><a href="https://help.rengabim.com/" target="blank">Renga</a> | <a href="https://github.com/RengaSoftware" target="blank">Renga Software on GitHub</a> | <a href="doxygen_crawl.html">Generated by </a><a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"></a> 1.10.0 </li>
    </ul>
</div>
<!--END FOOTER-->
<!-- end header part -->
